<%= link_to post_path(post), class: "block glass-card rounded-2xl overflow-hidden card-hover group" do %>
  <!-- Media -->
  <div class="aspect-square relative overflow-hidden bg-gray-900">
    <% if post.video? %>
      <% if post.thumbnail_url.present? %>
        <img src="<%= post.thumbnail_url %>" alt="<%= post.title %>" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
      <% else %>
        <video src="<%= post.media_url %>" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" muted></video>
      <% end %>
      <div class="absolute top-3 right-3 glass px-3 py-1.5 rounded-full text-xs text-white flex items-center gap-1.5">
        <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20">
          <path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"/>
        </svg>
        동영상
      </div>
    <% else %>
      <img src="<%= post.media_url %>" alt="<%= post.title %>" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
    <% end %>

    <!-- Overlay Gradient -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

    <!-- Score Badge (on hover) -->
    <div class="absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0">
      <div class="flex items-center gap-2">
        <span class="glass px-3 py-1.5 rounded-full text-sm font-semibold <%= post.score > 0 ? 'text-green-400' : post.score < 0 ? 'text-red-400' : 'text-gray-300' %>">
          <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
          </svg>
          <%= post.score %>
        </span>
      </div>
    </div>
  </div>

  <!-- Info -->
  <div class="p-4">
    <h3 class="text-white font-semibold line-clamp-2 mb-3 group-hover:text-green-400 transition-colors"><%= post.title %></h3>

    <div class="flex items-center justify-between text-sm">
      <!-- User -->
      <div class="flex items-center gap-2">
        <% if post.user.avatar_url.present? %>
          <img src="<%= post.user.avatar_url %>" alt="" class="w-7 h-7 rounded-full ring-2 ring-gray-700 group-hover:ring-green-500/50 transition-all">
        <% else %>
          <div class="w-7 h-7 rounded-full bg-gradient-to-br from-green-500/50 to-emerald-600/50 flex items-center justify-center ring-2 ring-gray-700 group-hover:ring-green-500/50 transition-all">
            <span class="text-xs font-bold text-white"><%= post.user.display_name&.first&.upcase || '?' %></span>
          </div>
        <% end %>
        <span class="text-gray-400 truncate max-w-24 group-hover:text-gray-300 transition-colors"><%= post.user.display_name || post.user.username || "익명" %></span>
      </div>

      <!-- Stats -->
      <div class="flex items-center gap-3">
        <span class="flex items-center gap-1 <%= post.score > 0 ? 'text-green-400' : post.score < 0 ? 'text-red-400' : 'text-gray-500' %>">
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
          </svg>
          <span class="font-medium"><%= post.score %></span>
        </span>
        <span class="flex items-center gap-1 text-gray-500">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
          </svg>
          <span class="font-medium"><%= post.comments_count %></span>
        </span>
      </div>
    </div>
  </div>
<% end %>
